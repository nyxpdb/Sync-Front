import{r,j as e,C as i,a as n,z as ae,m as te,e as re,D as z,f as g,i as N,F as W,l as le,E as q,G as ie}from"./index-T3R_rq7t.js";import{e as l,m as B}from"./sharedData-CKLVm4da.js";import{A as ne,B as o}from"./Header-DQWyaUo3.js";import{P as ce,M as c}from"./PageHeader-FNeb9-6J.js";import{D as oe,a as de,b as me,C as xe}from"./CUDModal-CPdltBTE.js";import{T as he}from"./TextField-BudsMaMM.js";import{F as b,I as y,S as w}from"./Select-Du4xeYpE.js";import{A as C}from"./Avatar-D9tbhnRG.js";import{C as S}from"./Chip-C3XYgWae.js";import{D as ue}from"./DialogTitle-c-vEgWvA.js";import"./Typography-mA1RaIho.js";const Fe=()=>{console.log("Funcionarios component is rendering");const[d,O]=r.useState(""),[h,G]=r.useState("all"),[u,U]=r.useState("all"),[p,H]=r.useState("all"),[a,F]=r.useState(null),[$,m]=r.useState(!1),[R,x]=r.useState(!1),[j,D]=r.useState("create"),[k,E]=r.useState(null),M=s=>{F(s),m(!0)},V=()=>{D("create"),E(null),x(!0)},T=s=>{D("edit"),E(s),x(!0)},J=()=>{a&&(console.log("Deletando funcionário:",a.name),F(null),m(!1))},K=s=>{console.log("Dados do funcionário:",s),j==="create"?console.log("Criando novo funcionário"):console.log("Editando funcionário:",k?.name),x(!1)},Q=l.filter(s=>{const t=s.name.toLowerCase().includes(d.toLowerCase())||s.role.toLowerCase().includes(d.toLowerCase())||s.department.toLowerCase().includes(d.toLowerCase()),_=h==="all"||s.department===h,ee=u==="all"||s.shift===u,se=p==="all"||s.status===p;return t&&_&&ee&&se}),L=l.length,A=l.filter(s=>s.status==="Active").length,X=Math.round(l.reduce((s,t)=>s+t.performance,0)/l.length),f=[...new Set(l.map(s=>s.department))],I=[...new Set(l.map(s=>s.shift))],Y=[...new Set(l.map(s=>s.status))],Z=[{name:"name",label:"Nome Completo",type:"text",required:!0,placeholder:"Digite o nome completo"},{name:"role",label:"Cargo",type:"text",required:!0,placeholder:"Digite o cargo"},{name:"department",label:"Departamento",type:"select",required:!0,options:f.map(s=>({value:s,label:s}))},{name:"shift",label:"Turno",type:"select",required:!0,options:I.map(s=>({value:s,label:s}))},{name:"machineIds",label:"Máquinas Operadas",type:"multiselect",required:!1,options:B.map(s=>({value:s.id,label:s.name}))}],P=s=>{switch(s){case"Active":return"success";case"On Leave":return"warning";case"Medical Leave":return"warning";case"Absent":return"error";case"Next Shift":return"info";default:return"default"}},v=s=>{switch(s){case"Active":return"Ativo";case"On Leave":return"Em Licença";case"Medical Leave":return"Licença Médica";case"Absent":return"Ausente";case"Next Shift":return"Próximo Turno";default:return s}};return e.jsxs("div",{className:"w-screen min-h-screen flex flex-col bg-white",children:[e.jsx(ne,{}),e.jsxs("main",{className:"flex-1 w-full px-4 md:px-10 py-8 flex flex-col items-center bg-gradient-to-br from-[var(--bg)] via-[var(--accent)] to-[var(--primary)/10]",children:[e.jsxs("div",{className:"w-full max-w-7xl",children:[e.jsx(ce,{title:"Funcionários",subtitle:"Gestão e acompanhamento da equipe de produção"}),e.jsx(i,{className:"mb-6 shadow-lg",children:e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ae,{className:"text-[var(--primary)] text-lg"}),e.jsx("h2",{className:"text-lg font-semibold text-[var(--primary)]",children:"Filtros e Busca"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(he,{placeholder:"Buscar funcionários...",value:d,onChange:s=>O(s.target.value),size:"small",fullWidth:!0}),e.jsxs(b,{size:"small",fullWidth:!0,children:[e.jsx(y,{children:"Departamento"}),e.jsxs(w,{value:h,onChange:s=>G(s.target.value),label:"Departamento",children:[e.jsx(c,{value:"all",children:"Todos"}),f.map(s=>e.jsx(c,{value:s,children:s},s))]})]}),e.jsxs(b,{size:"small",fullWidth:!0,children:[e.jsx(y,{children:"Turno"}),e.jsxs(w,{value:u,onChange:s=>U(s.target.value),label:"Turno",children:[e.jsx(c,{value:"all",children:"Todos"}),I.map(s=>e.jsx(c,{value:s,children:s},s))]})]}),e.jsxs(b,{size:"small",fullWidth:!0,children:[e.jsx(y,{children:"Status"}),e.jsxs(w,{value:p,onChange:s=>H(s.target.value),label:"Status",children:[e.jsx(c,{value:"all",children:"Todos"}),Y.map(s=>e.jsx(c,{value:s,children:v(s)},s))]})]}),e.jsx(o,{variant:"contained",startIcon:e.jsx(te,{}),onClick:V,sx:{backgroundColor:"var(--primary)",color:"white","&:hover":{backgroundColor:"var(--primary-dark)"}},children:"Novo Funcionário"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(i,{className:"shadow-lg",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total de Funcionários"}),e.jsx("p",{className:"text-3xl font-bold text-blue-800",children:L}),e.jsx("p",{className:"text-xs text-blue-600",children:"+3 este mês"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"text-blue-600 text-xl"})})]})})}),e.jsx(i,{className:"shadow-lg",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Funcionários Ativos"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:A}),e.jsxs("p",{className:"text-xs text-green-600",children:[Math.round(A/L*100),"% da equipe"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"text-green-600 text-xl"})})]})})}),e.jsx(i,{className:"shadow-lg",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Performance Média"}),e.jsxs("p",{className:"text-3xl font-bold text-yellow-800",children:[X,"%"]}),e.jsx("p",{className:"text-xs text-yellow-600",children:"+2.1% vs mês anterior"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"text-yellow-600 text-xl"})})]})})}),e.jsx(i,{className:"shadow-lg",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Departamentos"}),e.jsx("p",{className:"text-3xl font-bold text-purple-800",children:f.length}),e.jsx("p",{className:"text-xs text-purple-600",children:"Distribuídos"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"text-purple-600 text-xl"})})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Q.map(s=>e.jsx(i,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:()=>M(s),children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{src:s.photo,alt:s.name,sx:{width:48,height:48}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-[var(--text)] mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:s.role})]})]}),e.jsx(S,{label:v(s.status),color:P(s.status),size:"small"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--muted)]",children:[e.jsx(N,{className:"text-[var(--primary)]"}),e.jsx("span",{children:s.department})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--muted)]",children:[e.jsx(W,{className:"text-[var(--primary)]"}),e.jsx("span",{children:s.shift})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--muted)]",children:[e.jsx(g,{className:"text-[var(--primary)]"}),e.jsxs("span",{children:[s.performance,"% Performance"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(o,{variant:"outlined",startIcon:e.jsx(le,{}),size:"small",onClick:t=>{t.stopPropagation(),M(s)},sx:{color:"var(--primary)",borderColor:"var(--primary)","&:hover":{backgroundColor:"var(--primary)",color:"white",borderColor:"var(--primary)"}},fullWidth:!0,children:"Ver Detalhes"}),e.jsx(o,{variant:"outlined",startIcon:e.jsx(q,{}),size:"small",onClick:t=>{t.stopPropagation(),T(s)},sx:{color:"var(--primary)",borderColor:"var(--primary)","&:hover":{backgroundColor:"var(--primary)",color:"white",borderColor:"var(--primary)"}},fullWidth:!0,children:"Editar"})]})]})},s.id))})]}),e.jsx(oe,{open:$,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:a&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{src:a.photo,className:"w-10 h-10"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:a.name}),e.jsx("p",{className:"text-sm opacity-90",children:a.role})]})]})}),e.jsx(de,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Cargo"})]}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:a.role})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Departamento"})]}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:a.department})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Turno"})]}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:a.shift})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Status"})]}),e.jsx(S,{label:v(a.status),color:P(a.status),size:"small"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-[var(--primary)]",children:"Máquinas Operadas"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const s=B.filter(t=>a.machineIds.includes(t.id));return s.length===0?e.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Nenhuma máquina associada."}):s.map(t=>e.jsx(S,{label:t.name,avatar:e.jsx(C,{src:t.image})},t.id))})()}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"var(--primary)",strokeWidth:"8",strokeDasharray:`${2*Math.PI*54}`,strokeDashoffset:`${2*Math.PI*54*(1-a.performance/100)}`,strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-[var(--primary)]",children:[a.performance,"%"]})})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Performance Geral"})})]})]})}),e.jsx(me,{className:"p-6",children:e.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[e.jsx(o,{variant:"contained",startIcon:e.jsx(q,{}),size:"small",onClick:()=>{T(a),m(!1)},sx:{backgroundColor:"var(--primary)",color:"white","&:hover":{backgroundColor:"var(--primary-dark)"}},children:"Editar"}),e.jsx(o,{variant:"contained",startIcon:e.jsx(ie,{}),size:"small",onClick:J,sx:{backgroundColor:"#dc2626",color:"white","&:hover":{backgroundColor:"#b91c1c"}},children:"Excluir"})]})})]})}),e.jsx(xe,{open:R,onClose:()=>x(!1),mode:j,title:j==="create"?"Novo Funcionário":"Editar Funcionário",fields:Z,initialData:k||{},onSubmit:K,entityType:"employee"})]})]})};export{Fe as default};
