import{r as o,j as e,m as G,C as d,a as u,d as c,b as F,h as g,f,l as L,E as k,g as O,n as U,G as B}from"./index-T3R_rq7t.js";import{m as l,e as v}from"./sharedData-CKLVm4da.js";import{A as H,B as x}from"./Header-DQWyaUo3.js";import{P as $}from"./PageHeader-FNeb9-6J.js";import{D as J,a as K,b as Q,C as X}from"./CUDModal-CPdltBTE.js";import{A as n}from"./Avatar-D9tbhnRG.js";import{C as i}from"./Chip-C3XYgWae.js";import{D as Y}from"./DialogTitle-c-vEgWvA.js";import"./Select-Du4xeYpE.js";import"./TextField-BudsMaMM.js";import"./Typography-mA1RaIho.js";const de=()=>{console.log("Maquinas component is rendering");const[t,h]=o.useState(null),[I,p]=o.useState(!1),[S,m]=o.useState(!1),[j,N]=o.useState("create"),[b,y]=o.useState(null),P=[{name:"name",label:"Nome da Máquina",type:"text",required:!0,placeholder:"Digite o nome da máquina"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"Operando",label:"Operando"},{value:"Parada",label:"Parada"},{value:"Manutenção",label:"Manutenção"}]},{name:"oee",label:"OEE (%)",type:"number",required:!0,placeholder:"Digite o OEE"},{name:"throughput",label:"Vazão (un/h)",type:"number",required:!0,placeholder:"Digite a vazão"},{name:"image",label:"URL da Imagem",type:"url",required:!1,placeholder:"Digite a URL da imagem"}],z=s=>{console.log("Dados da máquina:",s),j==="create"?console.log("Criando nova máquina"):console.log("Editando máquina:",b?.name),m(!1)},w=s=>{h(s),p(!0)},A=()=>{p(!1),h(null)},T=()=>{N("create"),y(null),m(!0)},M=s=>{N("edit"),y(s),m(!0)},V=()=>{t&&(console.log("Deletando máquina:",t.name),h(null),p(!1))},C=l.length,E=l.filter(s=>s.status==="Operando").length,R=l.filter(s=>s.status==="Manutenção").length,W=Math.round(l.reduce((s,a)=>s+a.oee,0)/l.length),q=s=>{switch(s){case"Operando":return"success";case"Parada":return"error";case"Manutenção":return"warning";default:return"default"}},D=s=>s.includes("Corte")?e.jsx(c,{}):s.includes("Prensa")?e.jsx(O,{}):s.includes("Injetora")?e.jsx(g,{}):s.includes("Montadora")?e.jsx(c,{}):e.jsx(c,{});return e.jsxs("div",{className:"w-screen min-h-screen flex flex-col bg-white",children:[e.jsx(H,{}),e.jsxs("main",{className:"flex-1 w-full px-4 md:px-10 py-8 flex flex-col items-center bg-gradient-to-br from-[var(--bg)] via-[var(--accent)] to-[var(--primary)/10]",children:[e.jsxs("div",{className:"w-full max-w-7xl",children:[e.jsx($,{title:"Máquinas",subtitle:"Monitoramento e controle das máquinas de produção"}),e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(x,{variant:"contained",startIcon:e.jsx(G,{}),onClick:T,sx:{backgroundColor:"var(--primary)",color:"white","&:hover":{backgroundColor:"var(--primary-dark)"}},children:"Adicionar Máquina"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(d,{className:"shadow-lg",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total de Máquinas"}),e.jsx("p",{className:"text-3xl font-bold text-blue-800",children:C}),e.jsx("p",{className:"text-xs text-blue-600",children:"Todas operacionais"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"text-blue-600 text-xl"})})]})})}),e.jsx(d,{className:"shadow-lg",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Em Operação"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:E}),e.jsxs("p",{className:"text-xs text-green-600",children:[Math.round(E/C*100),"% ativas"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"text-green-600 text-xl"})})]})})}),e.jsx(d,{className:"shadow-lg",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Em Manutenção"}),e.jsx("p",{className:"text-3xl font-bold text-orange-800",children:R}),e.jsx("p",{className:"text-xs text-orange-600",children:"Preventiva"})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"text-orange-600 text-xl"})})]})})}),e.jsx(d,{className:"shadow-lg",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"OEE Médio"}),e.jsxs("p",{className:"text-3xl font-bold text-yellow-800",children:[W,"%"]}),e.jsx("p",{className:"text-xs text-yellow-600",children:"+3.2% vs mês anterior"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"text-yellow-600 text-xl"})})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 w-full",children:l.map(s=>{const a=v.filter(r=>r.machineIds&&r.machineIds.includes(s.id));return e.jsxs(d,{className:"bg-white rounded-2xl shadow-lg p-0 flex flex-col items-stretch transition-transform duration-300 hover:-translate-y-2 hover:shadow-2xl cursor-pointer border border-gray-100 group",onClick:()=>w(s),children:[e.jsxs("div",{className:"relative flex flex-col items-center pt-6 pb-2 px-6 bg-gradient-to-t from-white via-gray-50 to-[var(--accent)/10] rounded-t-2xl",children:[e.jsx(n,{src:s.image,className:`w-20 h-20 border-4 shadow-lg mb-2 ${s.status==="Operando"?"border-green-400":s.status==="Manutenção"?"border-yellow-400":s.status==="Parada"?"border-red-400":"border-gray-300"}`}),e.jsx(i,{label:s.status,color:q(s.status),size:"small",className:"absolute top-4 right-4"})]}),e.jsxs("div",{className:"flex flex-col items-center px-6 pt-2 pb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-[var(--primary)] mb-1 flex items-center gap-2",children:[D(s.name)," ",s.name]}),e.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-1",children:a.length>0?a.map(r=>e.jsx(i,{label:r.name.split(" ")[0],avatar:e.jsx(n,{src:r.photo}),size:"small"},r.id)):e.jsx("span",{className:"text-xs text-[var(--muted)]",children:"Sem operador"})})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between px-6 pb-4 gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("span",{className:"text-[10px] text-[var(--muted)]",children:"OEE"}),e.jsxs("span",{className:"font-bold text-[var(--primary)] text-lg",children:[s.oee,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] h-1 rounded-full transition-all duration-300",style:{width:`${s.oee}%`}})})]}),e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("span",{className:"text-[10px] text-[var(--muted)]",children:"Vazão"}),e.jsxs("span",{className:"font-bold text-[var(--primary)] text-lg",children:[s.throughput," un/h"]})]})]}),e.jsxs("div",{className:"flex gap-2 px-6 pb-6 w-full mt-auto",children:[e.jsx(x,{variant:"outlined",startIcon:e.jsx(L,{}),size:"small",onClick:r=>{r.stopPropagation(),w(s)},sx:{color:"var(--primary)",borderColor:"var(--primary)","&:hover":{backgroundColor:"var(--primary)",color:"white",borderColor:"var(--primary)"}},fullWidth:!0,children:"Ver"}),e.jsx(x,{variant:"outlined",startIcon:e.jsx(k,{}),size:"small",onClick:r=>{r.stopPropagation(),M(s)},sx:{color:"var(--primary)",borderColor:"var(--primary)","&:hover":{backgroundColor:"var(--primary)",color:"white",borderColor:"var(--primary)"}},fullWidth:!0,children:"Editar"})]})]},s.id)})})]}),e.jsx(J,{open:I,onClose:A,maxWidth:"md",fullWidth:!0,children:t&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] text-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"text-white text-lg",children:D(t.name)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:t.name}),e.jsx("p",{className:"text-sm opacity-90",children:"Detalhes da Máquina"})]})]})}),e.jsx(K,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-[var(--primary)]",children:"Operadores/Funcionários"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{try{const{employeesData:s}=require("./Funcionarios"),a=s.filter(r=>r.machineIds.includes(t.id));return a.length===0?e.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Nenhum funcionário associado."}):a.map(r=>e.jsx(i,{label:r.name,avatar:e.jsx(n,{src:r.photo})},r.id))}catch{return e.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Funcionários não encontrados."})}})()})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{src:t.image,className:"w-24 h-24 border-4 border-[var(--primary)]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-[var(--text)] mb-2",children:t.name}),e.jsx("h5",{className:"text-md font-semibold text-[var(--primary)] mb-1",children:"Operadores / Funcionários"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(()=>{const s=v.filter(a=>a.machineIds&&a.machineIds.includes(t.id));return s.length===0?e.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Nenhum operador associado."}):s.map(a=>e.jsx(i,{label:a.name,avatar:e.jsx(n,{src:a.photo})},a.id))})()}),e.jsx(i,{label:t.status,color:q(t.status)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"OEE (Overall Equipment Effectiveness)"})]}),e.jsxs("p",{className:"text-sm text-[var(--muted)]",children:[t.oee,"%"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Vazão"})]}),e.jsxs("p",{className:"text-sm text-[var(--muted)]",children:[t.throughput," unidades/hora"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"text-[var(--primary)]"}),e.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:"Status"})]}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:t.status})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-[var(--primary)]",children:"Gráfico de Performance"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(()=>{const s=v.filter(a=>a.machineIds&&a.machineIds.includes(t.id));return s.length===0?e.jsx("span",{className:"text-sm text-[var(--muted)]",children:"Nenhum operador associado."}):s.map(a=>e.jsx(i,{label:a.name,avatar:e.jsx(n,{src:a.photo})},a.id))})()}),e.jsx("div",{className:"h-48 bg-gradient-to-br from-[var(--accent)] to-white rounded-lg flex items-center justify-center border border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[var(--primary)] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"text-white text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold text-[var(--text)] mb-2",children:"Performance da Máquina"}),e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Gráfico de eficiência e produção"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-[var(--primary)]",children:"Alertas Recentes"}),e.jsxs("div",{className:"space-y-2",children:[t.status==="Parada"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(U,{className:"text-red-500"}),e.jsx("span",{className:"text-sm text-red-700",children:"Máquina parada - Verificar equipamento"})]}),t.status==="Manutenção"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx(g,{className:"text-yellow-500"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Manutenção em andamento"})]}),t.status==="Operando"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(F,{className:"text-green-500"}),e.jsx("span",{className:"text-sm text-green-700",children:"Máquina operando normalmente"})]})]})]})]})]})}),e.jsx(Q,{className:"p-6",children:e.jsxs("div",{className:"flex gap-2 w-full justify-end",children:[e.jsx(x,{variant:"contained",startIcon:e.jsx(k,{}),size:"small",onClick:()=>M(t),sx:{backgroundColor:"var(--primary)",color:"white","&:hover":{backgroundColor:"var(--primary-dark)"}},children:"Editar"}),e.jsx(x,{variant:"contained",startIcon:e.jsx(B,{}),size:"small",onClick:V,sx:{backgroundColor:"#dc2626",color:"white","&:hover":{backgroundColor:"#b91c1c"}},children:"Excluir"})]})})]})}),e.jsx(X,{open:S,onClose:()=>m(!1),mode:j,title:j==="create"?"Adicionar Nova Máquina":"Editar Máquina",fields:P,initialData:b||{},onSubmit:z,entityType:"machine"})]})]})};export{de as default};
